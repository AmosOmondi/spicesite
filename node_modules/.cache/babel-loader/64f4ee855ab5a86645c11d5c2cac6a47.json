{"ast":null,"code":"var _jsxFileName = \"D:\\\\webprojects\\\\react\\\\ecom\\\\two\\\\src\\\\user\\\\UserDashboard.js\";\nimport React, { useState, useEffect } from 'react';\nimport Layout from '../core/Layout';\nimport { isAuthenticated } from '../auth';\nimport { Link } from 'react-router-dom';\nimport { getPurchaseHistory } from './apiUser';\nimport moment from 'moment';\nconst Dashboard = () => {\n  const [history, setHistory] = useState([]);\n\n  // If user is authenticated, we can get user info from the local storage\n  // Double destructure: destructure user, and then destructure the properties of user\n  const {\n    user: {\n      _id,\n      name,\n      email,\n      role\n    }\n  } = isAuthenticated();\n  const token = isAuthenticated().token;\n  const init = (userId, token) => {\n    getPurchaseHistory(userId, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setHistory(data);\n      }\n    });\n  };\n  useEffect(() => {\n    init(_id, token);\n  }, []);\n  const userLinks = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 4\n    }\n  }, \"User Links\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 6\n    }\n  }, \"My Cart\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"nav-link\",\n    to: `/profile/${_id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 6\n    }\n  }, \"Update Profile\"))));\n  const userInfo = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 4\n    }\n  }, \"User Information\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, name), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, email), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, role === 1 ? 'Admin' : 'Registered User')));\n  const purchaseHistory = history => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }\n  }, \"Purchase history\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, history.map((h, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, h.products.map((p, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 10\n    }\n  }, \"Product name: \", p.name), /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 10\n    }\n  }, \"Product price: \", p.price), /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 10\n    }\n  }, \"Purchased date: \", moment(p.createdAt).fromNow()), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 10\n    }\n  }))))))));\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: \"Dashboard\",\n    description: `Hello ${name}!`,\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, userLinks()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, userInfo(), purchaseHistory(history))));\n};\nexport default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Layout","isAuthenticated","Link","getPurchaseHistory","moment","Dashboard","history","setHistory","user","_id","name","email","role","token","init","userId","then","data","error","console","log","userLinks","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","to","userInfo","purchaseHistory","map","h","i","key","products","p","price","createdAt","fromNow","title","description"],"sources":["D:/webprojects/react/ecom/two/src/user/UserDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { getPurchaseHistory } from './apiUser';\r\nimport moment from 'moment';\r\n\r\nconst Dashboard = () => {\r\n\tconst [history, setHistory] = useState([]);\r\n\r\n\t// If user is authenticated, we can get user info from the local storage\r\n\t// Double destructure: destructure user, and then destructure the properties of user\r\n\tconst {\r\n\t\tuser: { _id, name, email, role }\r\n\t} = isAuthenticated();\r\n\tconst token = isAuthenticated().token;\r\n\r\n\tconst init = (userId, token) => {\r\n\t\tgetPurchaseHistory(userId, token).then((data) => {\r\n\t\t\tif (data.error) {\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tsetHistory(data);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tinit(_id, token);\r\n\t}, []);\r\n\r\n\tconst userLinks = () => (\r\n\t\t<div className='card'>\r\n\t\t\t<h4 className='card-header'>User Links</h4>\r\n\t\t\t<ul className='list-group'>\r\n\t\t\t\t<li className='list-group-item'>\r\n\t\t\t\t\t<Link className='nav-link' to='/cart'>\r\n\t\t\t\t\t\tMy Cart\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className='list-group-item'>\r\n\t\t\t\t\t<Link className='nav-link' to={`/profile/${_id}`}>\r\n\t\t\t\t\t\tUpdate Profile\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst userInfo = () => (\r\n\t\t<div className='card mb-5'>\r\n\t\t\t<h3 className='card-header'>User Information</h3>\r\n\t\t\t<ul className='list-group'>\r\n\t\t\t\t<li className='list-group-item'>{name}</li>\r\n\t\t\t\t<li className='list-group-item'>{email}</li>\r\n\t\t\t\t<li className='list-group-item'>\r\n\t\t\t\t\t{role === 1 ? 'Admin' : 'Registered User'}\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst purchaseHistory = (history) => (\r\n\t\t<div className='card mb-5'>\r\n\t\t\t<h3 className='card-header'>Purchase history</h3>\r\n\t\t\t<ul className='list-group'>\r\n\t\t\t\t<li className='list-group-item'>\r\n\t\t\t\t\t{history.map((h, i) => (\r\n\t\t\t\t\t\t<div key={i}>\r\n\t\t\t\t\t\t\t{h.products.map((p, i) => (\r\n\t\t\t\t\t\t\t\t<div key={i}>\r\n\t\t\t\t\t\t\t\t\t<h6>Product name: {p.name}</h6>\r\n\t\t\t\t\t\t\t\t\t<h6>Product price: {p.price}</h6>\r\n\t\t\t\t\t\t\t\t\t<h6>Purchased date: {moment(p.createdAt).fromNow()}</h6>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Layout\r\n\t\t\ttitle='Dashboard'\r\n\t\t\tdescription={`Hello ${name}!`}\r\n\t\t\tclassName='container-fluid'\r\n\t\t>\r\n\t\t\t<div className='row'>\r\n\t\t\t\t<div className='col-3'>{userLinks()}</div>\r\n\t\t\t\t<div className='col-9'>\r\n\t\t\t\t\t{userInfo()}\r\n\t\t\t\t\t{purchaseHistory(history)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Layout>\r\n\t);\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}