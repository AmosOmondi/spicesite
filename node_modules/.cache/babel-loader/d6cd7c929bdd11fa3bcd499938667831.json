{"ast":null,"code":"var _jsxFileName = \"D:\\\\webprojects\\\\react\\\\ecom\\\\two\\\\src\\\\user\\\\Signin.js\";\nimport React, { useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Layout from '../core/Layout';\nimport { signin, authenticate, isAuthenticated } from '../auth';\nconst Signin = () => {\n  const [values, setValues] = useState({\n    email: '',\n    password: '',\n    error: '',\n    loading: false,\n    redirectToReferrer: false\n  });\n  const {\n    email,\n    password,\n    error,\n    loading,\n    redirectToReferrer\n  } = values;\n  const {\n    user\n  } = isAuthenticated();\n\n  // handleChange is a HOF that returns another function\n  // The value we pass in for name is either name, email, or password\n  // On handleChange, we want to set the value state\n  // The value for [name] is dynamically generated depending on where it's coming from\n  const handleChange = name => event => {\n    setValues({\n      ...values,\n      error: false,\n      [name]: event.target.value\n    });\n  };\n  const clickSubmit = event => {\n    // Prevent default behavior of reload of the browser when the button is clicked\n    event.preventDefault();\n    setValues({\n      ...values,\n      error: false,\n      loading: true\n    });\n    // The data we send is an object\n    signin({\n      email,\n      password\n    }).then(data => {\n      if (data.error) {\n        setValues({\n          ...values,\n          error: data.error,\n          loading: false\n        });\n      } else {\n        // If successfully signin, save user data to local storage\n        // 1st arg is the data coming back\n        // 2nd arg is a callback that sets the redirectToReferrer to true. This will enable redirect\n        authenticate(data, () => {\n          setValues({\n            ...values,\n            redirectToReferrer: true\n          });\n        });\n      }\n    });\n  };\n  const signInForm = () => /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('email'),\n    type: \"email\",\n    className: \"form-control\",\n    value: email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('password'),\n    type: \"password\",\n    className: \"form-control\",\n    value: password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: clickSubmit,\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 4\n    }\n  }, \"Submit\"));\n  const showError = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 3\n    }\n  }, error);\n  const showLoading = () => loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, \"Loading...\"));\n  const redirectUser = () => {\n    if (redirectToReferrer) {\n      // Check if the user is authenticated and if they're admin user\n      if (user && user.role === 1) {\n        // Redirect to admin dashboard page\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/admin/dashboard\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 12\n          }\n        });\n      } else {\n        // Redirect to registered user dashboard page\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/user/dashboard\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 12\n          }\n        });\n      }\n    }\n    // If user is already signed in, redirect to home page\n    if (isAuthenticated()) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: \"Signin\",\n    description: \"Signin to Node React E-commerce App\",\n    className: \"container col-md-8 offset-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 3\n    }\n  }, showError(), showLoading(), signInForm(), redirectUser());\n};\nexport default Signin;","map":{"version":3,"names":["React","useState","Redirect","Layout","signin","authenticate","isAuthenticated","Signin","values","setValues","email","password","error","loading","redirectToReferrer","user","handleChange","name","event","target","value","clickSubmit","preventDefault","then","data","signInForm","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","onChange","type","onClick","showError","style","display","showLoading","redirectUser","role","to","title","description"],"sources":["D:/webprojects/react/ecom/two/src/user/Signin.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Layout from '../core/Layout';\r\nimport { signin, authenticate, isAuthenticated } from '../auth';\r\n\r\nconst Signin = () => {\r\n\tconst [values, setValues] = useState({\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t\terror: '',\r\n\t\tloading: false,\r\n\t\tredirectToReferrer: false\r\n\t});\r\n\r\n\tconst { email, password, error, loading, redirectToReferrer } = values;\r\n\tconst { user } = isAuthenticated();\r\n\r\n\t// handleChange is a HOF that returns another function\r\n\t// The value we pass in for name is either name, email, or password\r\n\t// On handleChange, we want to set the value state\r\n\t// The value for [name] is dynamically generated depending on where it's coming from\r\n\tconst handleChange = (name) => (event) => {\r\n\t\tsetValues({ ...values, error: false, [name]: event.target.value });\r\n\t};\r\n\r\n\tconst clickSubmit = (event) => {\r\n\t\t// Prevent default behavior of reload of the browser when the button is clicked\r\n\t\tevent.preventDefault();\r\n\t\tsetValues({ ...values, error: false, loading: true });\r\n\t\t// The data we send is an object\r\n\t\tsignin({ email, password }).then((data) => {\r\n\t\t\tif (data.error) {\r\n\t\t\t\tsetValues({ ...values, error: data.error, loading: false });\r\n\t\t\t} else {\r\n\t\t\t\t// If successfully signin, save user data to local storage\r\n\t\t\t\t// 1st arg is the data coming back\r\n\t\t\t\t// 2nd arg is a callback that sets the redirectToReferrer to true. This will enable redirect\r\n\t\t\t\tauthenticate(data, () => {\r\n\t\t\t\t\tsetValues({\r\n\t\t\t\t\t\t...values,\r\n\t\t\t\t\t\tredirectToReferrer: true\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst signInForm = () => (\r\n\t\t<form>\r\n\t\t\t<div className='form-group'>\r\n\t\t\t\t<label className='text-muted'>Email</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tonChange={handleChange('email')}\r\n\t\t\t\t\ttype='email'\r\n\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\tvalue={email}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='form-group'>\r\n\t\t\t\t<label className='text-muted'>Password</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tonChange={handleChange('password')}\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\tvalue={password}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<button onClick={clickSubmit} className='btn btn-primary'>\r\n\t\t\t\tSubmit\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t);\r\n\r\n\tconst showError = () => (\r\n\t\t<div\r\n\t\t\tclassName='alert alert-danger'\r\n\t\t\tstyle={{ display: error ? '' : 'none' }}\r\n\t\t>\r\n\t\t\t{error}\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst showLoading = () =>\r\n\t\tloading && (\r\n\t\t\t<div className='alert alert-info'>\r\n\t\t\t\t<h2>Loading...</h2>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\tconst redirectUser = () => {\r\n\t\tif (redirectToReferrer) {\r\n\t\t\t// Check if the user is authenticated and if they're admin user\r\n\t\t\tif (user && user.role === 1) {\r\n\t\t\t\t// Redirect to admin dashboard page\r\n\t\t\t\treturn <Redirect to='/admin/dashboard' />;\r\n\t\t\t} else {\r\n\t\t\t\t// Redirect to registered user dashboard page\r\n\t\t\t\treturn <Redirect to='/user/dashboard' />;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// If user is already signed in, redirect to home page\r\n\t\tif (isAuthenticated()) {\r\n\t\t\treturn <Redirect to='/' />;\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Layout\r\n\t\t\ttitle='Signin'\r\n\t\t\tdescription='Signin to Node React E-commerce App'\r\n\t\t\tclassName='container col-md-8 offset-md-2'\r\n\t\t>\r\n\t\t\t{showError()}\r\n\t\t\t{showLoading()}\r\n\t\t\t{signInForm()}\r\n\t\t\t{redirectUser()}\r\n\t\t</Layout>\r\n\t);\r\n};\r\n\r\nexport default Signin;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}