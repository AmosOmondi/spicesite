{"ast":null,"code":"var _jsxFileName = \"D:\\\\webprojects\\\\react\\\\ecom\\\\two\\\\src\\\\core\\\\Search.js\";\nimport React, { useState, useEffect } from 'react';\nimport { getCategories, list } from './apiCore';\nimport Card from './Card';\nconst Search = () => {\n  const [data, setData] = useState({\n    categories: [],\n    category: '',\n    search: '',\n    results: [],\n    searched: false\n  });\n  const {\n    categories,\n    category,\n    search,\n    results,\n    searched\n  } = data;\n  const loadCategories = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData({\n          ...data,\n          categories: data\n        });\n      }\n    });\n  };\n  useEffect(() => {\n    loadCategories();\n  }, []);\n  const searchData = () => {\n    // console.log(search, category);\n    if (search) {\n      list({\n        search: search || undefined,\n        category: category\n      }).then(response => {\n        if (response.error) {\n          console.log(response.error);\n        } else {\n          setData({\n            ...data,\n            results: response,\n            searched: true\n          });\n        }\n      });\n    }\n  };\n  const searchSubmit = e => {\n    e.preventDefault();\n    searchData();\n  };\n\n  // This is an HOF. A function returning another function\n  // Here, name could be 'category' or 'search'\n  // 'category' and 'search' are properties of data object\n  const handleChange = name => event => {\n    setData({\n      ...data,\n      [name]: event.target.value,\n      searched: false\n    });\n  };\n  const searchMessage = (searched, results) => {\n    if (searched && results.length === 1) {\n      return `Found ${results.length} product`;\n    }\n    if (searched && results.length > 0) {\n      return `Found ${results.length} products`;\n    }\n    if (searched && results.length < 1) {\n      return `No products found`;\n    }\n  };\n  const searchedProducts = (results = []) => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"mt-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 4\n    }\n  }, searchMessage(searched, results)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 4\n    }\n  }, results.map((product, i) => /*#__PURE__*/React.createElement(Card, {\n    key: i,\n    product: product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 6\n    }\n  }))));\n  const searchForm = () => /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: searchSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group input-group-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"btn mr-2\",\n    onChange: handleChange('category'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"All\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 8\n    }\n  }, \"All\"), categories.map((c, i) => /*#__PURE__*/React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, c.name)))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"search\",\n    className: \"form-control\",\n    onChange: handleChange('search'),\n    placeholder: \"Search by name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn input-group-append\",\n    style: {\n      border: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 6\n    }\n  }, \"Search\"))));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 4\n    }\n  }, searchForm()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 4\n    }\n  }, searchedProducts(results)));\n};\nexport default Search;","map":{"version":3,"names":["React","useState","useEffect","getCategories","list","Card","Search","data","setData","categories","category","search","results","searched","loadCategories","then","error","console","log","searchData","undefined","response","searchSubmit","e","preventDefault","handleChange","name","event","target","value","searchMessage","length","searchedProducts","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","map","product","i","key","searchForm","onSubmit","onChange","c","_id","type","placeholder","style","border"],"sources":["D:/webprojects/react/ecom/two/src/core/Search.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getCategories, list } from './apiCore';\r\nimport Card from './Card';\r\n\r\nconst Search = () => {\r\n\tconst [data, setData] = useState({\r\n\t\tcategories: [],\r\n\t\tcategory: '',\r\n\t\tsearch: '',\r\n\t\tresults: [],\r\n\t\tsearched: false\r\n\t});\r\n\r\n\tconst { categories, category, search, results, searched } = data;\r\n\r\n\tconst loadCategories = () => {\r\n\t\tgetCategories().then((data) => {\r\n\t\t\tif (data.error) {\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tsetData({ ...data, categories: data });\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tloadCategories();\r\n\t}, []);\r\n\r\n\tconst searchData = () => {\r\n\t\t// console.log(search, category);\r\n\t\tif (search) {\r\n\t\t\tlist({ search: search || undefined, category: category }).then(\r\n\t\t\t\t(response) => {\r\n\t\t\t\t\tif (response.error) {\r\n\t\t\t\t\t\tconsole.log(response.error);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetData({ ...data, results: response, searched: true });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tconst searchSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tsearchData();\r\n\t};\r\n\r\n\t// This is an HOF. A function returning another function\r\n\t// Here, name could be 'category' or 'search'\r\n\t// 'category' and 'search' are properties of data object\r\n\tconst handleChange = (name) => (event) => {\r\n\t\tsetData({ ...data, [name]: event.target.value, searched: false });\r\n\t};\r\n\r\n\tconst searchMessage = (searched, results) => {\r\n\t\tif (searched && results.length === 1) {\r\n\t\t\treturn `Found ${results.length} product`;\r\n\t\t}\r\n\t\tif (searched && results.length > 0) {\r\n\t\t\treturn `Found ${results.length} products`;\r\n\t\t}\r\n\t\tif (searched && results.length < 1) {\r\n\t\t\treturn `No products found`;\r\n\t\t}\r\n\t};\r\n\r\n\tconst searchedProducts = (results = []) => (\r\n\t\t<div>\r\n\t\t\t<h2 className='mt-4 mb-4'>{searchMessage(searched, results)}</h2>\r\n\t\t\t<div className='row'>\r\n\t\t\t\t{results.map((product, i) => (\r\n\t\t\t\t\t<Card key={i} product={product} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst searchForm = () => (\r\n\t\t<form onSubmit={searchSubmit}>\r\n\t\t\t<span className='input-group-text'>\r\n\t\t\t\t<div className='input-group input-group-lg'>\r\n\t\t\t\t\t<div className='input-group-prepend'>\r\n\t\t\t\t\t\t<select className='btn mr-2' onChange={handleChange('category')}>\r\n\t\t\t\t\t\t\t<option value='All'>All</option>\r\n\t\t\t\t\t\t\t{categories.map((c, i) => (\r\n\t\t\t\t\t\t\t\t<option key={i} value={c._id}>\r\n\t\t\t\t\t\t\t\t\t{c.name}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='search'\r\n\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\tonChange={handleChange('search')}\r\n\t\t\t\t\t\tplaceholder='Search by name'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='btn input-group-append' style={{ border: 'none' }}>\r\n\t\t\t\t\t<button className='input-group-text'>Search</button>\r\n\t\t\t\t</div>\r\n\t\t\t</span>\r\n\t\t</form>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='row'>\r\n\t\t\t<div className='container mb-3'>{searchForm()}</div>\r\n\t\t\t<div className='container-fluid mb-3'>{searchedProducts(results)}</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Search;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}